<aiml version="1.0.1" encoding="UTF-8">

    <!-- ======================= -->
    <!-- 1. MASTER QUERY HANDLERS -->
    <!-- ======================= -->

    <!-- Ask "Who is RELATION of PERSON?" -->
    <category>
        <pattern>WHO IS THE * OF *</pattern>
        <template>
            <think>
                <set name="query_rel"><star index="1"/></set>
                <set name="query_person"><star index="2"/></set>
            </think>
            Let me check who is the <star index="1"/> of <star index="2"/>...
        </template>
    </category>

    <!-- Variations without 'the' -->
    <category>
        <pattern>WHO IS * OF *</pattern>
        <template>
            <srai>WHO IS THE <star index="1"/> OF <star index="2"/></srai>
        </template>
    </category>

    <!-- Possessive: "Ali's father" -->
    <category>
        <pattern>WHO IS * S *</pattern>
        <template>
            <srai>WHO IS THE <star index="2"/> OF <star index="1"/></srai>
        </template>
    </category>

    <!-- ======================= -->
    <!-- 2. GENDER & DOB HANDLERS -->
    <!-- ======================= -->

    <category>
        <pattern>* IS MALE</pattern>
        <template>
            <think>
                <set name="query_rel">MALE</set>
                <set name="query_person"><star/></set>
            </think>
            Checking gender for <star/>...
        </template>
    </category>

    <category>
        <pattern>* IS FEMALE</pattern>
        <template>
            <think>
                <set name="query_rel">FEMALE</set>
                <set name="query_person"><star/></set>
            </think>
            Checking gender for <star/>...
        </template>
    </category>

    <category>
        <pattern>WHEN WAS * BORN</pattern>
        <template>
            <think>
                <set name="dob_person"><star/></set>
            </think>
            Checking date of birth...
        </template>
    </category>

    <category>
        <pattern>HOW OLD IS *</pattern>
        <template>
            <think>
                <set name="age_person"><star/></set>
            </think>
            Calculating age...
        </template>
    </category>

    <category>
        <pattern>* IS MY *</pattern>
        <template>
            <think>
                <set name="learn_p1"><star index="1"/></set>
                <set name="learn_rel"><star index="2"/></set>
                <set name="learn_p2">my</set>
            </think>
            Got it! I have recorded that <star index="1"/> is your <star index="2"/>.
        </template>
    </category>

    <category>
        <pattern>WHO IS MY *</pattern>
        <template>
            <think>
                <set name="query_rel"><star/></set>
                <set name="query_person">my</set>
            </think>
            Searching my memory for your <star/>...
        </template>
    </category>
    
    <!-- ======================= -->
    <!-- 3. LEARNING RELATIONSHIPS -->
    <!-- ======================= -->

    <!-- Case 1: "Ali is father of Sameer" -->
    <category>
        <pattern>* IS * OF *</pattern>
        <template>
            <think>
                <set name="learn_p1"><star index="1"/></set>
                <set name="learn_rel"><star index="2"/></set>
                <set name="learn_p2"><star index="3"/></set>
            </think>
            I have learned that <star index="1"/> is the <star index="2"/> of <star index="3"/>.
        </template>
    </category>

    <!-- Case 2: "Ali is the father of Sameer" -->
    <category>
        <pattern>* IS THE * OF *</pattern>
        <template>
            <srai><star index="1"/> IS <star index="2"/> OF <star index="3"/></srai>
        </template>
    </category>

    <!-- ======================= -->
    <!-- 4. DOB & OTHER ATTRIBUTES -->
    <!-- ======================= -->

    <category>
        <pattern>THE DOB OF * IS *</pattern>
        <template>
            <think>
                <set name="other_dob_person"><star index="1"/></set>
                <set name="other_dob"><star index="2"/></set>
            </think>
            Date of birth for <star index="1"/> saved.
        </template>
    </category>

    
</aiml>
